\documentclass[oneside,12pt,twiside,a4paper]{ctexbook}

\usepackage{ctex}
\usepackage{listings} % 插入代码

%
% 插入代码
%
\lstset{language=C++}%这条命令可以让LaTeX排版时将C++ 键字突出显示
\lstset{breaklines}%这条命令可以让LaTeX自动将长的代码行换行排版
\lstset{extendedchars=false}%这一条命令可以解决代码跨页时，章节标题，页眉等汉字不显示的问题
\lstset{
    numbers=left,
    numberstyle= \tiny,
    keywordstyle= \color{ blue!70},
    commentstyle= \color{red!50!green!50!blue!50},
    % frame=shadowbox, % 阴影效果
    rulesepcolor= \color{ red!20!green!20!blue!20} ,
    escapeinside=``, % 英文分号中可写入中文
    xleftmargin=2em,xrightmargin=2em, aboveskip=1em,
    framexleftmargin=2em,
}

\usepackage{geometry} %页边距和页眉页脚
\usepackage{titlesec}%TEX标题与正文间距，标题与上下文距离调整
\titleformat{\chapter}[display]{\normalfont\huge\bfseries\center}{\chaptertitlename}{1pt}{\Huge}
\titleformat{\section}{\normalfont\Large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\normalfont\large\bfseries}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalfont\normalsize\bfseries}{\thesubsubsection}{1em}{}
\titleformat{\paragraph}[runin]{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titleformat{\subparagraph}[runin]{\normalfont\normalsize\bfseries}{\thesubparagraph}{1em}{}
\titlespacing*{\chapter} {0pt}{10pt}{10pt}
\titlespacing*{\section} {0pt}{0.5ex plus 1ex minus .2ex}{0.3ex plus .2ex}
\titlespacing*{\subsection} {0pt}{0.25ex plus 1ex minus .1ex}{0.5ex plus .1ex}
\titlespacing*{\subsubsection}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
\titlespacing*{\paragraph} {0pt}{3.25ex plus 1ex minus .2ex}{1em}
\titlespacing*{\subparagraph} {\parindent}{3.25ex plus 1ex minus .2ex}{1em}
\geometry{left=2.0cm,right=2.1cm,top=2.0cm,bottom=2.5cm}% 页边距和页眉页脚


\begin{document}

\author
{
何书文\\
1201220707@pku.edu.cn\\
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{algorithm}
\maketitle
\tableofcontents
%页眉

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\rhead{\includegraphics{   shuwen.png}}
%\rhead{}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{list}
\section{list}

\begin{lstlisting}
    package main

    import(
        "fmt"
    )
    
    type ListNode struct{
        Val int 
        Next *ListNode
    }
    
    func main()  {
        headNode := &ListNode{}
        listData := headNode
    
        InsertTail(1,listData,headNode)
        PrintList(listData)
    
        InsertTail(2,listData,headNode)
        PrintList(listData)
    
        InsertTail(3,listData,headNode)
        PrintList(listData)
    }
    
    func InsertTail(value int,list,position *ListNode)  {
        tempCell := new(ListNode)
    
        if tempCell == nil{
            fmt.Println("out of space")
        }
    
        tempCell.Val = value
        tempCell.Next = position.Next
        position.Next = tempCell
    }
    
    func PrintList(list *ListNode)  {
        if list.Next != nil{
            fmt.Print(list.Val,"->")
            PrintList(list.Next)
        }else{
            fmt.Println(list.Val)
        }
    }
            
\end{lstlisting}

\end{document}